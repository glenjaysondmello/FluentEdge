scalar Upload

type TypingMistake {
  error: String!
  correction: String!
  type: String!
}

type TypingTest {
  id: ID!
  referenceText: String!
  wpm: Float!
  cpm: Float!
  accuracy: Float!
  score: Float!
  mistakes: [TypingMistake!]!
  suggestions: String
  encouragement: String
  createdAt: String!
}

type SpeakingScore {
  fluency: Float!
  pronunciation: Float!
  grammar: Float!
  vocabulary: Float!
  overall: Float!
}

type SpeakingMistake {
  error: String!
  correction: String!
  type: String!
}

type SpeakingTest {
  id: ID!
  transcript: String
  scores: SpeakingScore
  encouragement: String
  mistakes: [SpeakingMistake!]
  suggestions: [String!]
  status: SpeakingTestStatus!
  createdAt: String!
}

enum SpeakingTestStatus {
  PROCESSING
  COMPLETED
  FAILED
}

type Query {
  getTypingTests: [TypingTest!]!
  getTypingTestText: String!

  getSpeakingTests: [SpeakingTest!]!
  getSpeakingTestText: String!
  getResultById(
    resultId: String!
  ): SpeakingTest!
}

type Mutation {
  submitTypingTest(
    referenceText: String!
    userText: String!
    durationSec: Float!
  ): TypingTest!

  submitSpeakingTest(
    referenceText: String!
    audioFile: Upload!
  ): String!
}
